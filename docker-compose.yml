version: '3.7'
services:
    nginx:
        build: ./nginx
        ports:
            - 80:80
        volumes:
            - .:/app:rw
        depends_on:
            - django
        restart: "on-failure"
    django:
        build: .
        command: sh -c "gunicorn carbon_friendly_api.wsgi:application --bind 0.0.0.0:8000 --chdir carbon_friendly_api"
        env_file:
            - env.list
        image: django
        expose:
            - 8000
        restart: "on-failure"
